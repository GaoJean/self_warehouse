<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.warehouse.dal.mapper.ext.ExtInventoryDOMapper">
    <resultMap id="BaseResultMap" type="com.warehouse.dal.model.InventoryDO"
               extends="com.warehouse.dal.mapper.InventoryDOMapper.BaseResultMap">

    </resultMap>
    <sql id="Base_Column_List">
        <include refid="com.warehouse.dal.mapper.InventoryDOMapper.Base_Column_List"/>
    </sql>
    <insert id="insert" parameterType="com.warehouse.dal.model.InventoryDO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into `inventory` (product_id, sku_id, unit,
        totalRemaining, out_bound_times, out_bound,
        in_bound_times, in_bound)
        values (#{productId,jdbcType=INTEGER}, #{skuId,jdbcType=INTEGER}, #{unit,jdbcType=CHAR},
        #{totalremaining,jdbcType=INTEGER}, #{outBoundTimes,jdbcType=INTEGER}, #{outBound,jdbcType=INTEGER},
        #{inBoundTimes,jdbcType=INTEGER}, #{inBound,jdbcType=INTEGER})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.warehouse.dal.model.InventoryDO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update `inventory`
        set product_id = #{productId,jdbcType=INTEGER},
        sku_id = #{skuId,jdbcType=INTEGER},
        unit = #{unit,jdbcType=CHAR},
        totalRemaining = #{totalremaining,jdbcType=INTEGER},
        out_bound_times = #{outBoundTimes,jdbcType=INTEGER},
        out_bound = #{outBound,jdbcType=INTEGER},
        in_bound_times = #{inBoundTimes,jdbcType=INTEGER},
        in_bound = #{inBound,jdbcType=INTEGER}
        where id = #{id,jdbcType=INTEGER}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select 'false' as QUERYID,id, product_id, sku_id, unit, totalRemaining, out_bound_times,
        out_bound, in_bound_times, in_bound, is_delete, gmt_create, gmt_modified
        from `inventory`
        where id = #{id,jdbcType=INTEGER}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select id, product_id, sku_id, unit, total_remaining, out_bound_times, out_bound,
        in_bound_times, in_bound, is_delete, gmt_create, gmt_modified
        from `inventory`
    </select>

    <select id="selectAdminList" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from `inventory`
        where is_delete = 0
        <if test="skuIds !=null and skuIds.size() >0 ">
            and sku_id in
            <foreach collection="skuIds" item="skuId" close=")" open="(" separator=",">
                #{skuId}
            </foreach>
        </if>
        <if test="productIds !=null and productIds.size() >0 ">
            and product_id in
            <foreach collection="productIds" item="productId" close=")" open="(" separator=",">
                #{productId}
            </foreach>
        </if>
    </select>
</mapper>